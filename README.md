# zx
zx tools for bash (In ZX SPECTRUM Spirit)
===

Расширение для bash для работы в оболочке для тех, кто помнит работу в ZX Spectrum. 
А кто не помнит, тоже покажется удачным.
Позволяет создавать скрипты прямо в оболочке, отлаживая и добавляя рабочие команды в файл

Черновик в первом приближении. Планируется воссоздание всей функциональности встроенной оболчки ZX Spectrum

Утилиты 
===
---

* **zxalias** создает PATH на местоположение zx директории и алиасы на zx-утилиты с вызовом через source

Пример: 

. zxalias

---

* **zx10alias** также создает алиасы на 10..90 100..990 и вызывает zxalias

Пример:

. zx10alias

---

* **zxadd** служит для добавления в редактируемый скрипт строки с нужным номером и работает только если есть симлинк 10.. 20... 30.. на нее

Пример:

ln -s zxadd 10

10 echo Hello world

---

* **zxset** служит для добавления в редактируемый скрипт строки с нужным номером zxset 10 echo Hello world, также добавляет alias 10='zxset 10'

Пример:

. zxset 1 echo Hello world

На него установлен alias .. 

.. 1 echo Hello world

-- в тех случаях,  если алиаса на 1 еще нет то можно выполнить

---

* **zxlist** выводит listing редактируемого скрипта

Пример:

zxlist

---

* **zxrun** запускает редактируемый скрипт

Пример:

zxrun

---

* **zxcopy** позволяет скопировать n-ю строку из history в m-ую строку редактируемого скрипта

Пример:

. zxcopy 663 25

---

* **zxedit** позволяет отредактировать в командной строке строчку с указанным номером, требует xdotools и работает только в X. Альтернативное решение для настоящих текстовых терминалов пока не нашел, буду искать. Сейчас же сделано так, в history добавляется листинг редактируемой программы, после чего предлагается нажать ctrl-r и ввести номер нужной строки. Практически тоже самое

Пример:

zxedit 10

---

* **Служебные файлы**

*  zxprog хранит текущую программу (содержимое вида 10 echo Hello world)

* zxconf содеожит имя zxprog и определяет текущую директорию

* zxtemp временный файл для проверки гипотез (будет удален вдальнейшем)

---


Как работать
===

Сначала нужно запустить 

`. zxalias`

причем обязательно через source, чтобы настроить окружение bash для работы.

Можно добавить эту запись в .profile

Далее посмотрим редактируемый скрипт

`zxlist`

Решили добавить строку

`10 echo Hello world`

Если нестандартный номер, то выдаст ошибку так как нет alias

`15 echo ============`

Чтобы добавить использем

`.. !!`


или сразу пишем

`.. 16 echo`

Если строка с таким номером существует, она будет перезаписана.
Чтобы отредактировать строку используем zxedit

` zxedit 15`

Если установлены xdotools и вы в X11, будет строка загружена
Если вы не в X11, то в history будут добавлены строки из редактируемого скрипта и можно выбрать нужную строку с помощью ctrl-r и ввода номера, либо клавиш вверх-вниз
